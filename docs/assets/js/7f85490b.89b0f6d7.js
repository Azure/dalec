"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[114],{2109:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var a=s(4848),i=s(8453);const t={title:"Dependencies"},r=void 0,c={id:"dependencies",title:"Dependencies",description:"PackageDependencies specifies dependency information for a particular package.  This includes dependencies for runtime, which will be installed along with the package by the package manager, as well as any dependencies needed to build and/or test the resulting package. Configuration for any additional package repositories which are required may also be added here.",source:"@site/docs/dependencies.md",sourceDirName:".",slug:"/dependencies",permalink:"/dalec/dependencies",draft:!1,unlisted:!1,editUrl:"https://github.com/Azure/dalec/blob/main/website/docs/dependencies.md",tags:[],version:"current",frontMatter:{title:"Dependencies"},sidebar:"sidebar",previous:{title:"Sources",permalink:"/dalec/sources"},next:{title:"Targets",permalink:"/dalec/targets"}},o={},l=[{value:"Fields",id:"fields",level:3},{value:"Example",id:"example",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"PackageDependencies"})," specifies dependency information for a particular package.  This includes dependencies for runtime, which will be installed along with the package by the package manager, as well as any dependencies needed to build and/or test the resulting package. Configuration for any additional package repositories which are required may also be added here."]}),"\n",(0,a.jsx)(n.h3,{id:"fields",children:"Fields"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Build"}),": The list of packages required to build the package."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'build:\n  package_name:\n      version: [">=1.0.0", "<2.0.0"]\n      arch: ["amd64", "arm64"]\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Runtime"}),": The list of packages required to install/run the package."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'runtime:\n  package_name:\n      version: [">=1.0.0", "<2.0.0"]\n      arch: ["amd64", "arm64"]\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Recommends"}),": The list of packages recommended to install with the generated package."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'recommends:\n  package_name:\n      version: [">=1.0.0", "<2.0.0"]\n      arch: ["amd64", "arm64"]\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["Each of the above fields is a list of ",(0,a.jsx)(n.a,{href:"https://pkg.go.dev/github.com/Azure/dalec#PackageConstraints",children:"PackageConstraints"}),"."]})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Test"}),": Lists and extra packages required for running tests. These are only installed for tests which have steps that require running a command in the built container. See ",(0,a.jsx)(n.a,{href:"https://pkg.go.dev/github.com/Azure/dalec#TestSpec",children:"TestSpec"})," for more information"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"test:\n  - package_name_1\n  - package_name_2\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"ExtraRepos"}),": Used to inject extra package repositories that may be used to satisfy package dependencies in various stages."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'extra_repos:\n  - keys:\n      mykey:\n        http:\n          URL: "https://example.com/mykey.gpg"\n          permissions: 0644\n    config: \n      myrepo:\n        http:\n          url: "https://example.com/myrepo.list"\n    data: \n      - dest: "/path/to/dest"\n        spec: source\n    envs: ["build", "test", "install"] \n'})}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/dalec/repositories",children:"repositories"})," for more details on repository configs."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'dependencies:\n  build:\n    gcc:\n      version: [">=9.0.0"]\n      arch: ["amd64"]\n  runtime:\n    libc6:\n      version: [">=2.29"]\n  recommends:\n    curl:\n      version: [">=7.68.0"]\n  test:\n    - bats\n  extra_repos:\n    - keys:\n        mykey: \n          http:\n            url: "https://example.com/mykey.gpg"\n            permissions: 0644\n      config:\n        myrepo:\n          http:\n            url: "https://example.com/myrepo.list"\n      # this assumes that a build context named `my-local-repo` containing a local repository will be passed \n      # to the Dalec build.\n      # /opt/repo can now be referenced as a local repository in a repository config imported to dalec\n      data:\n        - dest: "/opt/repo"\n          spec:\n            context:\n              name: "my-local-repo"\n      envs: ["build", "install"]\n'})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var a=s(6540);const i={},t=a.createContext(i);function r(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);