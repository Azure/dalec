# syntax=local/dalec/frontend

name: dalec-test-systemd-socket
description: A test fixture which tests the installation of a simple systemd unit
website: https://www.github.com/Azure/dalec
version: 0.0.1
revision: 1
vendor: Microsoft
license: Apache 2.0
packager: Microsoft <support@microsoft.com>

dependencies:
  build:
    msft-golang:
  runtime:
    nmap-ncat:
    python3:
    bash:
    curl:
    systemd:

sources:
  src:
    context: {}
    path: test/fixtures/service/socket
    includes: 
    - test/fixtures/service/socket/

artifacts:
  binaries:
    src/main.py:
      name: foo

  systemdUnits:
    src/foo.service: {}
    src/foo.socket:
      enable: false

image:
  # entrypoint: /bin/service
  entrypoint: /sbin/init
  stop_signal: SIGRTMIN+3
  user: root